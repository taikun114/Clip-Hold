# Clip Hold 変更ログ
[English](/CHANGELOG.md) | **日本語**

<!--
記載する順番は以下の通り。
- 新機能
  - 特筆すべき情報
  - 対応
  - 追加
- バグ修正と改善
  - 修正
  - 改善
  - 変更
  - 追加
  - 削除
1.5.0以降のバージョンのみ。それ以前のバージョンはこの順番に従っていない可能性あり。

注意点
- リストの一層目は太字にすること
- リンクは太字にすること
- IssueやPull Request、Discussionへのリンクを貼る場合は完全なURLを記載すること
-->

## 1.6.0（開発中）
### 新機能
- **定型文プリセットにアイコンと色を設定できる機能を追加**
  - 各プリセットに色をつけ、お好みのアイコンを設定できるようになりました。
  - アイコンは、SF Symbolsの中から選ぶことができます。アプリ内のシンボルピッカーからアイコンを選ぶことができますが、より詳細にシンボルを確認したり検索したりするには[**SF Symbolsアプリ**](https://developer.apple.com/jp/sf-symbols/)を使うと便利です。
  - 定型文設定の「プリセットの設定」セクションにあるプリセット編集画面からアイコンと色を変更することができます。
- **一般設定の「履歴ウィンドウ」セクションと「定型文ウィンドウ」セクションに「オーバーレイ表示」オプションと「オーバーレイ時の透明度」オプションを追加**
  - **オーバーレイ表示**
    - フォーカスが当たっていない時は、ウィンドウを半透明にします。
  - **オーバーレイ時の透明度**
    - 「オーバーレイ表示」がオンになっている時、ウィンドウが半透明状態の透明度を20%から80%の間で設定することができます。
- **コピー履歴設定の「履歴の設定」セクションに「定型文を無視する」オプションを追加**
  - コピーした定型文を履歴に追加しないようにします。
- **履歴ウィンドウのコンテキストメニューとアクションメニューに「このアプリからのすべての履歴を削除...」機能を追加**

### バグ修正と改善
- **「視覚効果を減らす」がオンになっているときに、動きのあるアニメーションをなくすように改善**
- **macOS Sequoiaまたはそれ以前のバージョンで設定ウィンドウのナビゲーションボタンのスタイルを改善**
  - アイコンの位置と余白が改善され、システム設定のナビゲーションボタンに近づきました。
- **デフォルトプリセットを編集できるように改善**
  - デフォルトプリセットを編集して色やアイコンを変更できるようになりました（名前は変更できませんのでご注意ください）。
- **プライバシー設定のアクセシビリティと通知の権限状態表示がリアルタイムで更新されるように改善**
- **「クイックペースト」がオフになっている時の「クイックペーストをテキストに限定」のスタイルを改善**
  - 「クイックペースト」がオフになっている時、設定項目からタイトルと説明が薄い色に変更され、変更不可能状態であることがわかりやすくなりました。
- **定型文設定の「プリセットの設定」セクションにあるプリセットリストにヘルプテキストを追加**
  - リストの各項目にマウスカーソルを乗せると、ツールチップにプリセット名全体が表示されるようになりました。
- **各プリセットピッカーのプリセット名に文字数制限を追加**
  - 長すぎるプリセット名が設定されていても、プリセット名で画面が覆われたり処理速度が低下したりしなくなりました。

## 1.5.0
### 新機能
- **フィルタリングオプションに「標準テキストのみ」と「リッチテキストのみ」を追加**
  - これらのオプションは「テキストのみ」の中にあります。
- **フィルタリングオプションに「PDFのみ」と「動画のみ」、「フォルダのみ」「その他のファイル」を追加**
  - これらのオプションは「ファイルのみ」の中にあります。
- **編集してコピーできる機能を追加**
  - 履歴ウィンドウでテキスト項目のコンテキストメニューとアクションメニューにある「編集してコピー...」をクリックすることで、履歴を編集してコピーすることができます。
  - ショートカットキーを使って最新の履歴を編集してコピーすることもできます。ショートカットキーはデフォルトで`⌥ (Option)` + `⌘ (Command)` + `E`です。
  - この機能は過去の履歴から取得したテキストを編集してコピーする機能で、過去の履歴が変更されてしまうことはありません。

### バグ修正と改善
- **設定のカスタム番号入力シートをエスケープキーで閉じたときに、以前選択されていた項目が選択されない問題を修正**
- **「.」から始まるフォルダをコピーした場合に履歴ウィンドウに表示されない問題を修正**
- **定型文の追加とプリセットの追加ウィンドウの背景を修正**
- **一般・コピー履歴設定の設定項目名と説明を改善**
  - わかりやすい名前に変更され、各項目に説明が追加されたため、各設定項目の役割や、それがどのような機能であるかがわかりやすくなりました。
- **一般・コピー履歴設定の設定項目の配置を改善**
  - 関連する機能や似たような機能が並ぶように配置が改善されました。
- **履歴の読み込み中にフィルタリングと並び替えボタンを無効化するように改善**
- **設定ウィンドウをエスケープキーで閉じられるように改善**
- **定型文追加画面のスタイルを改善**
- **システム設定で「カラー以外で区別」がオンの時にプライバシー設定のインジケーターを図形で区別できるように改善**
- **システム設定で「コントラストを上げる」がオンの時に履歴と定型文ウィンドウの検索ボックスに境界線を表示するように改善**
- **システム設定で「コントラストを上げる」がオンの時に設定ウィンドウのナビゲーションボタンの間にある区切り線を強調するように改善**
- **履歴リストで、存在しないアプリに専用のアイコンを表示するように改善**
- **フィルタリングオプションの「アプリ」ピッカーに選択しているアプリアイコンと名前が表示されるように改善**
- **デフォルトで履歴と定型文ウィンドウの各項目に番号が表示されるように変更**
- **デフォルトで履歴と定型文ウィンドウの各項目をダブルクリックしたときにウィンドウを閉じないように変更**
- **リッチテキストのアイコンを変更**
  - `append.page`から`richtext.page`に変更され、リッチテキストの項目がわかりやすくなりました。
- **フィルタリングオプションの「リンクのみ」を「テキストのみ」の中に変更**
- **クリップボードの確認間隔を0.1秒に変更**
  - 以前の0.5秒から0.1秒に高速化されたため、履歴の更新やアプリの取得が遅れにくくなりました。
  - この変更によるパフォーマンスの影響は最小限です。
- **各フィルタリングオプションと並び替えオプションにアイコンを追加**
- **「画像のみ」のフィルタリング対象に`ico`、`icns`、`svg`、`eps`、`ai`、`psd`を追加**
- **履歴ウィンドウのコンテキストメニューとアクションメニューの「標準テキストとしてコピー」からアイコンを削除**
  - Appleの[**ヒューマンインターフェイスガイドライン**](https://developer.apple.com/jp/design/human-interface-guidelines/menus#Icons)に従い、関連する機能のアイコンは親項目（この場合は「コピー」）の1つだけに表示されるように修正されました。

## 1.4.0
### 新機能
- **リッチテキストに対応**
  - これにより、Microsoft Officeソフトでテキストが画像としてコピーされてしまう問題（[**#3**](https://github.com/taikun114/Clip-Hold/issues/3)）が修正されました。
- **PDFに対応**
  - クリップボードにPDFとしてデータを保持するソフトでは、ベクターデータをPDFとしてコピーすることができるようになりました。
- **Liquid Glassに対応**
  - Liquid Glass用にデザインされた新しいアプリアイコンが追加されました。
  - 履歴・定型文ウィンドウの背景とライセンス情報画面のオーバーレイ背景にLiquid Glass効果が追加されました。
  - Liquid GlassはmacOS Tahoeまたはそれ以降に対応しています。
- **履歴ウィンドウで、履歴項目がリッチテキストだった場合に「標準テキストとしてコピー」を追加**
- **履歴ウィンドウのアプリフィルタリングオプションに「自動」を追加**
  - このオプションでは、自動的に最前面のアプリでフィルタリングされるようになります。
- **一般設定の「履歴ウィンドウ」セクションに「アプリの『自動』フィルタリングでClip Holdのウィンドウ除外」を追加**
  - アプリの「自動」フィルタリングが有効な状態でClip Holdのウィンドウ（履歴ウィンドウなど）をフォーカスしたときに、フィルタリングするアプリが切り替わらないようにします。
- **ショートカット設定の「コピー履歴」セクションに「履歴ウィンドウフィルタリングされたコピー履歴を使用」を追加**
  - 履歴ウィンドウが開いていてフィルタリングが適用されている場合、ショートカットキーでフィルタリングされた履歴をコピーできるようにします。
- **定型文設定の割り当てるプリセットリストとプライバシー設定の除外するアプリリストに、ドラッグアンドドロップしてアプリを追加できるようにする機能を追加**

### バグ修正と改善
- **定型文追加画面からプリセット追加画面を開いたとき、定型文入力欄に音声入力されてしまう問題を修正**
- **プライバシー設定の除外するアプリを追加する画面で「すべてのプロセスを表示」が機能しない問題を修正**
- **ショートカットキーでプリセットを切り替えたときに表示される通知でデフォルトプリセット名がローカライズされない問題を修正**
- **定型文設定の「割り当てるプリセット」ピッカーで選択されているプリセットが削除されたときにピッカーが空になってしまう問題を修正**
- **定型文設定の割り当てるプリセットリストが切り替わったときにアプリの削除ボタン（リストのマイナスボタン）が更新されない問題を修正**
- **履歴と定型文ウィンドウを閉じてもメモリが解放されない問題を修正**
- **プリセットが1つも存在しないときの設定画面と定型文追加画面を改善**
- **すべてのプリセットを削除したときの設定画面と定型文ウィンドウを改善**
- **定型文追加画面からプリセットを追加して定型文追加画面に戻ったとき、入力欄にフォーカスが戻るように改善**
- **プリセットを削除するときのアラート本文を改善**
  - 削除しようとしているプリセット内の定型文の数とそれらが削除されることを示すメッセージを追加しました。
- **設定ウィンドウのフォーカス状態検出を改善**
  - 設定ウィンドウの「情報」ボタンのスタイルが適切に設定されるように改善されました。
- **画像ファイルの表示名のみがローカライズされるように改善**
  - ウェブブラウザからコピーした画像など、ファイル名が取得できない画像ファイルをコピーしてからシステムの言語を変更したときに適切にローカライズされるように改善されました。

## 1.3.2
### 新機能
- **定型文設定の「プリセットの割り当て」セクションに「Clip Holdのウィンドウを除外する」オプションを追加**
  - Clip Holdのウィンドウ（定型文ウィンドウなど）をフォーカスしたときに、プリセットが切り替わらないようにします。

### バグ修正と改善
- **「履歴を保存する最大数」が設定されているときに、設定された数の新しい履歴ではなく、古い履歴が残されてしまう問題（[#2](https://github.com/taikun114/Clip-Hold/issues/2)）を修正**
- **定型文編集画面の余白を改善**
- **プリセットをインポートしたときに最後に選択されていたプリセットが記憶されるように改善**

## 1.3.1
### 新機能
- **履歴と定型文ウィンドウの項目をドラッグアンドドロップしてコピーできる機能を追加**
  - 履歴ウィンドウの場合は各項目に表示されているアイコン、定型文ウィンドウの場合はリスト項目をドラッグアンドドロップして、ドロップした場所にテキストまたはファイルをコピーできます。
- **定型文を複製する機能を追加**
  - 定型文ウィンドウまたは定型文設定の「定型文の設定」セクションにある定型文リストでコンテキストメニューとアクションメニュー（定型文ウィンドウのみ）に追加された「複製」をクリックすることで定型文を複製することができます。
- **プリセットを複製する機能を追加**
  - 定型文設定の「プリセットの設定」セクションにあるプリセットリストでコンテキストメニューに追加された「複製」をクリックすることでプリセットを複製することができます。
- **定型文を別のプリセットに移動する機能を追加**
  - 定型文ウィンドウまたは定型文設定の「定型文の設定」セクションにある定型文リストでコンテキストメニューとアクションメニュー（定型文ウィンドウのみ）に追加された「別のプリセットに移動...」をクリックすることで定型文を異なるプリセットに移動することができます。

### バグ修正と改善
- **最後に選択されていたプリセットが記憶されない問題を修正**
- **設定ウィンドウの最後の位置が記憶されない問題を修正**
- **一部の場所でデフォルトプリセットがローカライズされない問題を修正**
- **プリセットへのインポートシートで説明テキストが見切れてしまうことがあった問題を修正**
- **定型文設定のコンテキストメニューの一部にアイコンがなかった問題を修正**
- **履歴ウィンドウのフィルタリングオプションのアプリピッカーにアプリアイコンを追加**
- **履歴ウィンドウのフィルタリング・並び替えボタンと定型文ウィンドウのプリセットボタンをピッカーに変更**
- **プリセットアイコンを`star.square`に変更**
  - 定型文ウィンドウとメニューでアイコンが変更されたことで、プリセット機能を一目で認識することができるようになりました。

## 1.3.0

> [!IMPORTANT]
> このバージョンでは、履歴ファイルの保存方法が大きく変更されました。\
> 以前のバージョンからアップデートすると履歴ファイルも新しい形式へアップグレードされます。**新しい履歴ファイル形式は古いバージョンのClip Holdとは互換性がありません。**
> 
> なお、以前のバージョンで使用されていた履歴ファイル`clipboardHistory.json`はアップグレード後、`oldClipboardHistory.json`へ名前が変更された状態で残されます。\
> そのため、履歴ファイルのアップグレード後に何らかの理由で古いバージョンのClip Holdを使用する際は、`oldClipboardHistory.json`を`clipboardHistory.json`へ名前を変更することで古いClip Holdで古い履歴ファイルを読み込むことができます。

> [!IMPORTANT]
> このバージョンでは、定型文のプリセット機能の登場により、保存方法が変更されました。\
> ファイルの構造自体に変更は無いため、古いバージョンのClip Holdと互換性があります。
>
> なお、以前のバージョンで使用されていた定型文ファイル`standardPhrases.json`は`standardPhrasesPreset`フォルダ内に`default.json`へ名前が変更されます。\
> そのため、何らかの理由で古いバージョンのClip Holdを使用する場合は、`standardPhrasesPreset/default.json`を`standardPhrases.json`へ名前を変更することで古いClip Holdで定型文ファイルを読み込むことができます。

### 新機能
- **設定画面を大幅刷新**
  - 既存のタブ形式から、サイドバー形式の設定画面へ大幅刷新しました。
- **定型文のプリセット機能を追加**
  - よく使う定型文をプリセットごとにまとめられるようになりました。メニューや定型文ウィンドウからプリセットを切り替えることができます。ショートカットキーを使ってプリセットを作成したり、切り替えたりすることもできます。
- **「定型文」設定に「プリセットの割り当て」設定を追加**
  - プリセットをアプリに割り当てると、そのアプリが最前面の時は、自動で選択されたプリセットに切り替わるようになります。
- **「開発者向け機能」タブの追加**
  - **「文字数カウントを表示」オプションを追加**
    - 履歴ウィンドウとメニューの日付の後に、文字数カウントを表示します。
  - **「カラーコードに基づくカラーアイコンを表示する」オプションを追加**
    - HEX、HSL / HSLA、RGB / RGBA形式のカラーコードをコピーすると、履歴・定型文ウィンドウとメニューにその色のアイコンが表示されるようになります。
  - **「カラーコードでフィルタリングできるようにする」オプションを追加**
    - 履歴をウィンドウのエリタリングオプションに「カラーコードのみ」を追加します。
  - **「すべての設定をリセット」オプションを追加**
    - アプリのすべての設定を初期状態に戻します。履歴や定型文は影響を受けません。
- **「アプリアイコンを表示」オプションを追加**
  - 履歴ウィンドウの各項目にアプリアイコンを表示するかどうかを切り替えます。
- **定型文でリンクに対応**
  - 定型文ウィンドウでも履歴ウィンドウと同様、項目がリンクの場合にコンテキストメニューから「リンクを開く」が表示されるようになりました。
- **複数ファイルの同時コピーに対応**
- **履歴ウィンドウで、アプリによるフィルタリングに対応**

### バグ修正と改善
- **ライセンス画面で「QRコードについて」が2つ表示されていた問題を修正**
- **Safariから画像や画像アドレスがコピーできなかった問題を修正**
- **時々履歴に追加されなかったことがあった問題を修正**
- **定型文ウィンドウの背景色がテーマと一致しないことがあった問題を修正**
- **メニューの履歴サムネイルが正方形に収まるように改善**
- **Optionキーを押したままメニューバーから項目をクリックした際、一時的にクイックペーストを無効化するように改善**
  - ショートカットキーからコピーした場合はこの影響を受けません。
- **大量の履歴項目がある状態でコピーを行うと大きなディスク書き込みが発生する問題を改善**
- **「除外するアプリ」リストのアプリ追加画面で表示されるアプリリストを改善**
- **定型文の追加編集画面のデザインを改善**
- **カスタム番号入力シートのデザインを改善**
- **履歴ウィンドウのリスト項目にアプリアイコンを追加**
  - コピーしたときに最前面にあったアプリのアイコンが表示されます。この機能が追加される前のコピー履歴にはアイコンが表示されません。
  - アプリアイコンにマウスカーソルを乗せると、ツールチップにアプリ名が表示されます。
- **定型文ウィンドウにアイコンを追加**
- **項目がファイルの場合、履歴ウィンドウのメニューに「開く」を追加**
- **履歴ウィンドウのメニューに「除外するアプリに追加...」を追加**
- **履歴からファイルを削除しようとしている際の専用のアラートメッセージを追加**
- **定型文の追加画面に保存先プリセットを選択できるピッカーを追加**
- **ファイルの重複検知方法をファイルハッシュベースに変更**
  - これにより、ファイルの重複検知をより正確に行うことができるようになりました。ファイルハッシュを計算することができないフォルダなどは既存のサイズベースで重複検知されます。
- **「ファイル1つあたりの最大容量:」のデフォルトを1 GBから無制限に変更**

## 1.2.1
### バグ修正と改善
- **フィルタリングオプションに表示される「〇〇のみ」の英語表記を「Only 〇〇」から「〇〇 Only」に修正**
  - 例: `Only Text` → `Text Only`
- **履歴項目がウェブサイトへのリンクだった場合、クリップのアイコンを表示するように改善**
- **履歴ウィンドウのフィルタリングオプションに「リンクのみ」を追加**

## 1.2.0
### 新機能
- **ファイルと画像のコピー履歴保存に対応**
- **履歴ウィンドウでファイルのクイックルックに対応**
  - 項目が選択された状態でスペースキーを押すか、メニューから「クイックルック」をクリックするとクイックルックできます。
- **履歴ウィンドウにフィルタリングオプションと並び替えオプションを追加**
  - ファイルの種類で絞り込んだり、日付順やファイルサイズ順で並べ替えたりすることができます。
- **クイックペーストに関する設定で「テキストのみ」オプションを追加**
  - このオプションをオンにすると、クイックペーストを行う際、誤ってファイルや画像をペーストしてしまうことを防ぐことができます。
- **「ファイル1つあたりの最大容量」オプションを追加**
  - 容量を設定すると、設定した容量よりも大きいファイルはコピー履歴に保存されなくなります。
- **「次の容量より大きいファイルコピー時にアラートを表示」オプションを追加**
  - 容量を設定すると、設定した容量よりも大きいファイルをコピーした際に履歴に保存するかどうかを尋ねるアラートが表示されます。
- **履歴ウィンドウでウェブサイトのURLが含まれるテキスト項目のメニューに「リンクを開く...」オプションを追加**
- **履歴ウィンドウでQRコードが含まれる画像項目のメニューに「QRコードの内容をコピー」オプションを追加**
  - これに伴い、画像をコピーした場合に自動でQRコードがスキャンされるようになったため、「QRコード画像をスキャンする」設定が削除されました。

### バグ修正と改善
- **小さいアプリアイコン画像を追加**
  - これにより、システム設定など、小さなアプリアイコン画像が表示される場合でもわかりやすくなりました。
- **メニューの各項目と履歴ウィンドウの履歴項目にアイコンを追加**
  - メニュー項目の一部のアイコンは、macOS Tahoeまたはそれ以降で表示されます。
- **新しい「コピー履歴」タブを追加**
  - コピー履歴に関する設定は新しいタブに移動しました。
- **履歴ウィンドウの項目がファイルの場合、日付の横にファイルサイズを追加**
- **「除外するアプリ」設定の説明を変更**
- **履歴ウィンドウで履歴リストのパフォーマンスを改善**
  - 数千を超える項目が含まれていてもパフォーマンスが低下しづらくなりました。

## 1.1.1
### バグ修正と改善
- **定型文にも表示される文字数制限を追加**
  - メニューに表示される定型文、定型文設定のリスト項目、ショートカット設定に表示される定型文が長くなりすぎないようになります。

## 1.1.0
### 新機能
- **コピーしたテキストからQRコードを作成する機能を追加**
  - 履歴ウィンドウと定型文ウィンドウの項目オプションにある「QRコードを表示」をクリックするとQRコードが生成されます。
- **QRコードを含む画像をコピーしたときに履歴に追加する機能を追加**
  - 設定で「QRコード画像をスキャンする」をオンにすると利用可能になります。
- **QRコードを含む画像を履歴ウィンドウにドラッグアンドドロップしたときにコンテンツをコピーする機能を追加**
- **クリップボードの内容から定型文を作成する機能の追加**
  - 現在のクリップボード内容から定型文を追加するショートカットキーを追加しました。
  - 履歴ウィンドウの項目から定型文を追加する機能を追加しました。
- **履歴リストが更新されたときに自動的に一番上にスクロールする機能を追加**
  - 設定で「リストが更新されたら最も上にスクロールする」をオンにすると利用できます。

### バグ修正と改善
- **定型文ウィンドウと履歴ウィンドウでのコンテキストメニューを改善**
  - 追加の画面が表示される項目には末尾に「...」を追加し、「削除...」の上に区切り線を追加しました。
- **一般設定の配置を改善**
- **定型文ウィンドウで項目を並び替えられるように改善**
  - 検索中でない場合のみ並び替えることができます。
- **定型文ウィンドウと履歴ウィンドウの位置を正しく記憶するように修正**

## 1.0.1
### バグ修正と改善
- **アクセシビリティラベルの追加**
  - VoiceOverユーザーが項目を理解できるように説明が追加されました。
- **メニューバーアイコンを一時的に非表示にするオプションの追加**
  - アプリを開き直すと再びアイコンが表示されるようになります。

## 1.0.0
初期リリース！
